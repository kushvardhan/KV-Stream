<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover"
    />
    <link rel="shortcut icon" href="/tv-fill.svg" type="image/x-icon" />
    <link rel="stylesheet" href="/build-fixes.css" />
    <title>KV | Movie APP</title>
    <script>
      // Handle redirects from 404.html
      (function () {
        // Check if we have a redirect path stored in sessionStorage
        var redirectPath = sessionStorage.getItem("redirect_path");
        if (redirectPath) {
          // Clear the redirect path from sessionStorage
          sessionStorage.removeItem("redirect_path");
          // Use history API to update the URL without causing a page refresh
          history.replaceState(null, null, redirectPath);
        }
      })();
    </script>
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <style>
      html,
      body,
      #root {
        height: auto !important;
        min-height: 100% !important;
        width: 100% !important;
        max-width: 100% !important;
        overflow-x: hidden !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        touch-action: pan-y !important;
        position: relative !important;
      }

      /* Fixed sidebar styles */
      .sidebar-container {
        position: fixed !important;
        top: 0 !important;
        bottom: 0 !important;
        left: 0 !important;
        height: 100vh !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        z-index: 100 !important;
      }

      /* Ensure top arrow button is visible on all devices */
      @media (max-width: 768px) {
        .category-page .scroll-top-button {
          right: 1rem !important;
          top: 70vh !important;
        }
        .category-page .scroll-top-button button {
          width: 44px !important;
          height: 44px !important;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
      // Ensure the scroll-to-top button is visible in production
      document.addEventListener("DOMContentLoaded", function () {
        // Wait for React to render
        setTimeout(function () {
          // Add styles directly to any scroll-top-button elements
          const scrollButtons = document.querySelectorAll(".scroll-top-button");
          scrollButtons.forEach(function (btn) {
            btn.style.position = "fixed";
            btn.style.zIndex = "1000";
            btn.style.width = "48px";
            btn.style.height = "48px";
            btn.style.right = "4rem";
            btn.style.top = "80vh";

            // Style the button inside
            const buttonElement = btn.querySelector("button");
            if (buttonElement) {
              buttonElement.style.width = "48px";
              buttonElement.style.height = "48px";
              buttonElement.style.borderRadius = "50%";
              buttonElement.style.background =
                "linear-gradient(to right, rgba(101, 86, 205, 0.9), rgba(79, 70, 229, 0.9))";
              buttonElement.style.display = "flex";
              buttonElement.style.alignItems = "center";
              buttonElement.style.justifyContent = "center";
              buttonElement.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.3)";
            }
          });

          // Fix the sidenav
          const sidenavs = document.querySelectorAll(".sidebar-container");
          sidenavs.forEach(function (sidenav) {
            sidenav.style.position = "fixed";
            sidenav.style.top = "0";
            sidenav.style.bottom = "0";
            sidenav.style.left = "0";
            sidenav.style.height = "100vh";
            sidenav.style.overflowY = "auto";
            sidenav.style.overflowX = "hidden";
            sidenav.style.zIndex = "100";
          });
        }, 1000); // Wait 1 second for React to render
      });
    </script>
  </body>
</html>
